<?xml version="1.0" encoding="utf-8"?>
<Defs>
	<PsychicRitualRoleDef>
		<defName>recatek_EssentophagyTarget</defName>
		<label>target</label>
		<allowedCount>1</allowedCount>
		<allowedConditions>Default, Downed, Prisoner, Sleeping, IdeoUnwilling</allowedConditions>
		<applyPowerOffset>false</applyPowerOffset>
		<removeOnLost>false</removeOnLost>
	</PsychicRitualRoleDef>

	<Recatek.Essentophagy.PsychicRitualDef_Essentophagy>
		<defName>recatek_Essentophagy</defName>
		<label>essentophagy</label>
		<description>Consume a target's essence to steal a random trait. If the invoker already has 4 or more innate traits, one will be lost at random.</description>
		<researchPrerequisite>recatek_Essentophagy</researchPrerequisite>
		<outcomeDescription>At the current ritual quality, there is a {0} chance to steal a trait.{1}\n\nRegardless of outcome, the target will receive lethal brain damage and the invoker may suffer a psychic breakdown lasting days. </outcomeDescription>
		<targetRole>recatek_EssentophagyTarget</targetRole>
		<hoursUntilOutcome>4</hoursUntilOutcome>
		<requiredOffering>
			<filter>
				<thingDefs>
					<li>Shard</li>
				</thingDefs>
			</filter>
			<count>1</count>
		</requiredOffering>
		<cooldownHours>120</cooldownHours>
		<brainDamageRange>100~100</brainDamageRange>
		<successChanceFromQualityCurve>
			<points>
				<li>(0, 0)</li>
				<li>(0.01, 0.2)</li>
				<li>(0.5, 0.4)</li>
				<li>(1, 0.8)</li>
			</points>
		</successChanceFromQualityCurve>
		<breakdownSeverityCurve>
			<points>
				<li>(0, 3.0)</li>
				<li>(0.1, 3.0)</li>
				<li>(0.5, 7.0)</li>
				<li>(1, 11.9)</li>
			</points>
		</breakdownSeverityCurve>
		<iconPath>UI/Essentophagy</iconPath>
	</Recatek.Essentophagy.PsychicRitualDef_Essentophagy>

	<ResearchProjectDef>
		<defName>recatek_Essentophagy</defName>
		<label>essentophagy</label>
		<description>Perform a psychic ritual that steals a trait from a victim and gives it to the invoker. The process will kill the target and temporarily debilitate the invoker.</description>
		<tab>Anomaly</tab>
		<prerequisites>
			<li>Philophagy</li>
		</prerequisites>
		<knowledgeCost>30</knowledgeCost>
		<knowledgeCategory>Advanced</knowledgeCategory>
		<researchViewX>6.50</researchViewX>
		<researchViewY>0.70</researchViewY>
		<generalRules>
			<rulesStrings>
				<li>subject->essentophagy</li>
				<li>subject->trait transfer</li>

				<li>subject_story->developed a method of linking minds and merging personalities</li>
				<li>subject_story->researched artificial chimerism experiments in a genetic lab</li>
				<li>subject_story->investigated nanobot technology for radical body transformation</li>
				<li>subject_story->developed memories from a life that wasn't [ANYPAWN_possessive] own</li>

				<li>subject_gerund->transferring a subject's essence</li>

				<li>subject_gerund->performing a ritual to steal a victim's essence</li>
			</rulesStrings>
		</generalRules>
	</ResearchProjectDef>

	<HediffDef ParentName="DiseaseBase">
		<defName>recatek_RitualSickness</defName>
		<label>ritual sickness</label>
		<description>The after-effects of a disturbing psychic ritual affecting proprioception and sense of self. The disorientation causes nausea, dizziness, and brain fog.</description>
		<descriptionShort>After-effects of a disturbing psychic ritual including dizziness, nausea, and vomiting.</descriptionShort>
		<makesSickThought>true</makesSickThought>
		<scenarioCanAdd>true</scenarioCanAdd>
		<comps>
			<li Class="HediffCompProperties_Disappears">
				<disappearsAfterTicks>90000~150000</disappearsAfterTicks>
				<showRemainingTime>true</showRemainingTime>
			</li>
		</comps>
		<stages>
			<li>
				<vomitMtbDays>0.125</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<postFactor>0.8</postFactor>
					</li>
					<li>
						<capacity>Moving</capacity>
						<postFactor>0.9</postFactor>
					</li>
					<li>
						<capacity>Manipulation</capacity>
						<postFactor>0.9</postFactor>
					</li>
				</capMods>
			</li>
		</stages>
	</HediffDef>

</Defs>
